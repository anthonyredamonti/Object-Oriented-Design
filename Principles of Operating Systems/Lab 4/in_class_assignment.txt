/* main.c - main */
#include <xinu.h>
void m1();void m2();
sid32 sem;
pid32 m1pid, m2pid;

void main(void)
{
    sem1 = semcreate(0); 
	m1pid=create(m1, 1024, 21,"m1", 0);
    m2pid=create(m2, 1024, 20,"m2", 0);
    resume(m1pid);
    resume(m2pid);
    return OK; 
}

void m1(){
	int32 i;
	int32 x = 2;
	int32 count = 0;
	for(i = 1; i <= 20; i++){
		count++;
		kprintf("%d ", i);
		if(count == x){
			count = 0;
			wait(sem);
		}
	}
	kill(m2pid);
}

void m2(){
	int32 i;
	int32 x = 3;
	int32 count = 0;
	for(i = 101; i > 0; i--){
		count++;
		kprintf("%d ", i);
		if(count == x){
			count = 0;
			signal(sem);
		}
	}
}